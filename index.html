<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>Trình phát video</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      body {
        margin: 0;
        background: #000;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
      }
      video {
        max-width: 90%;
        max-height: 90%;
        background: #000;
      }
      .error {
        color: #fff;
        font-family: sans-serif;
        text-align: center;
        padding: 20px;
      }
    </style>
  </head>
  <body>
    <div id="container"></div>

    <script>
      const container = document.getElementById("container");

      // Lấy toàn bộ URL (bao gồm query string)
      const fullUrl = window.location.href;

      // Xác định phần sau "/-/"
      const prefix = "/-/";
      const idx = fullUrl.indexOf(prefix);

      let videoUrl = "";
      if (idx !== -1) {
        // Lấy mọi thứ sau "/-/"
        videoUrl = decodeURIComponent(fullUrl.slice(idx + prefix.length));
      }

      // Nếu có URL video hợp lệ
      if (videoUrl.startsWith("http")) {
        const video = document.createElement("video");
        video.src = videoUrl;
        video.controls = true;
        video.autoplay = true;
        video.playsInline = true;
        video.muted = true;
        container.appendChild(video);
      } else {
        container.innerHTML = `
          <div class="error">
            <h2>⚠️ Không có video để phát</h2>
            <p>Hãy thêm đường dẫn video đầy đủ sau <code>/-/</code>.</p>
            <p>Ví dụ:<br>
              <code>https://tiniurl.github.io/-/https://cdn.discordapp.com/attachments/1435686909253910551/1435686993886711848/video4920191771247379820.mp4?ex=690cdf35&is=690b8db5&hm=cd5e8cd8dcfc7876151bfdb2122531509f744dabeee1a8fa2c6da3cfadb9a2c7&</code>
            </p>
          </div>
        `;
      }
    </script>
  </body>
</html>
